<%= render "shared/navbar"%>
<div class="container py-5 bg-body-tertiary">
  <h3 class="text-center">My Dashboard</h3>
  <div class="dashboard-container">
    <div class="my-info">
      <%# <%= display user info %>
      <h3>Hi <%= @user.username %> ğŸ‘‹ğŸ½</h3>
      <hr>
      <h5>Your Subject: <span class="badge text-bg-light"><%= @user.subject %></span></h5>
      <h5>Your Current Learning Goal: <span class="badge text-bg-light"><%= @user.learning_goal %></span></h5>
      <h5>Your grade: <span class="badge text-bg-light"><%= @user.grade %></span></h5>
      <h5>Your Interests: <span class="badge text-bg-light"><%= @user.interests.map(&:name).join(', ') %></span></h5>
      <%# display latest project %>
      <% if @latest_project %>
        <h5>Latest Project: <span class="badge text-bg-light"><%= @latest_project.name %></span></h5>
      <% else %>
        <p>No project added yet.</p>
      <% end %>
      <%# display upcoming deadlines %>
      <% if @upcoming_projects.any? %>
        <h5>Your Upcoming Deadlines:</h5>
        <ul>
          <% @upcoming_projects.each do |project| %>
            <li><%= project.name %> - <%= project.deadline.strftime('%Y-%m-%d %H:%M') %></li>
          <% end %>
        </ul>
      <% else %>
        <h5>No upcoming deadlines.</h5>
      <% end %>
      <%# display user points %>
      <h5>Your Points: <span class="badge text-bg-light"><%= @user_points %></span></h5>
    </div>
    <%# display buddy %>
    <div class="buddy-container">
      <%= cl_image_tag("https://res.cloudinary.com/du53mgiot/image/upload/v1691219849/dog_main.png", height: 150, crop: :fill) %>
      <p class="buddy-text">Hello!</p>
    </div>
    <div class="buddy-links text-center">
      <%# This should link to the buddy show page in the future %>
      <%= link_to buddy_path(@buddy) do %>
        <i class="fa-solid fa-paw dashboard-paw"></i>
      <% end %>
    </div>

    <%# display recommended projects %>
    <div class="container">
      <% if @recommended_projects.any? %>
      <div class="card text-center">
        <div class="card-header">
          Try one of these projects!
        </div>
        <% @recommended_projects.each do |project| %>
        <div class="card-body">
          <h5 class="card-title">Name: <%= project.name %></h5>
          <p class="card-text">Subject: <%= project.subject %></p>
          <%= link_to 'â¡ï¸ Try it now!', project_path(project), class: "btn btn-light" %>
         <% end %>
        </div>
          <% else %>
          <p>Ups Sorry ğŸ˜¬</p>
          <p>We don't have any matches for you... yet!</p>
          <p>Wanna get some recommendations? Try updating your interests ğŸ˜‰ <%= link_to "Here", profiles_path %> ğŸ¤ğŸ¼</p>
      </div>
    </div>
      <% end %>
  </div>
</div>
