<%= render "shared/navbar"%>
<div class="container py-3">
  <h3 class="text-center">My Dashboard</h3>
  <div class="dashboard-container">
    <div class="my-info">
      <%# <%= display user info %>
      <hr>
      <h4>Hi <%= @user.username %> 👋🏽</h4>
      <hr>
      <%# <h6>Your Subject: <span class="badge text-bg-light"><%= @user.subject %>
      <h6>Your Current Learning Goal: <span class="badge text-bg-light"><%= @user.learning_goal %></span></h6>
      <%# <h6>Your grade: <span class="badge text-bg-light"><%= @user.grade %>
      <%# <h6>Your Interests: <span class="badge text-bg-light"><%= @user.interests.map(&:name).join(', ') %>
      <%# display latest project %>
      <% if @latest_project %>
        <h6>Latest Project: 👉
        <span class="badge text-bg-light">
          <%= link_to @latest_project.name, projects_path(@project), class: 'no-link-style' %>
        </span>
        </h6>
      <% else %>
        <p>No project added yet.</p>
      <% end %>
      <%# display upcoming deadlines %>
      <% if @upcoming_projects.any? %>
        <h6>Your Upcoming Deadlines:</h6>
        <ul>
          <% @upcoming_projects.each do |project| %>
            <li><%= project.name %> - <%= project.deadline.strftime('%Y-%m-%d %H:%M') %></li>
          <% end %>
        </ul>
      <% else %>
        <h6>No upcoming deadlines.</h6>
      <% end %>
      <%# display user points %>
      <%# <h6>Your Points: <span class="badge text-bg-light"><%= @user_points %>
    </div>
  </div>
</div>

<%# display buddy %>
<div class="buddy-container">
  <%= cl_image_tag("https://res.cloudinary.com/du53mgiot/image/upload/v1691219849/dog_main.png", height: 150, crop: :fill) %>
  <p class="buddy-text">Hello!</p>
</div>
<div class="buddy-links text-center">
  <%# This should link to the buddy show page in the future %>
  <%= link_to buddy_path(@buddy) do %>
    <i class="fa-solid fa-paw dashboard-paw"></i>
  <% end %>
</div>

<%# display recommended projects %>
<div class="container">
  <% if @recommended_projects.any? %>
  <div class="card text-center">
    <div class="card-header">
      Try one of these projects!
    </div>
    <% @recommended_projects.each do |project| %>
    <div class="card-body">
      <h6 class="card-title">Name: <%= project.name %></h6>
      <p class="card-text">Subject: <%= project.subject %></p>
      <%= link_to '➡️ Try it now!', project_path(project), class: "btn btn-light" %>
      <% end %>
    </div>
      <% else %>
      <p>Ooops! Sorry! 😬</p>
      <p>We don't have any matches for you... yet!</p>
      <p>Want some recommendations? Try updating your interests<%= link_to " 👉 Here 👈", profiles_path, class: 'no-link-style' %> 🤞🏼</p>
  </div>
  <% end %>
</div>
<br>
